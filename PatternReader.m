classdef PatternReader < matlab.apps.AppBase    % Properties that correspond to app components    properties (Access = public)        UIFigure                  matlab.ui.Figure        Grid                      matlab.ui.container.GridLayout        DropDown                  matlab.ui.control.DropDown        Switch                    matlab.ui.control.Switch        Export_Output             matlab.ui.control.Button        Export_Input              matlab.ui.control.Button        Table_DataOut             matlab.ui.control.Table        Table_DataIn              matlab.ui.control.Table        Label_Pol                 matlab.ui.control.Label        Button_ContourPlot        matlab.ui.control.Button        Button_3dPlot             matlab.ui.control.Button        Label_max                 matlab.ui.control.Label        Panel_Rect                matlab.ui.container.Panel        Grid_Rect                 matlab.ui.container.GridLayout        Axes2                     matlab.ui.control.UIAxes        Panel_Polar               matlab.ui.container.Panel        Grid_Polar                matlab.ui.container.GridLayout        RangeMax                  matlab.ui.control.Spinner        RangeMin                  matlab.ui.control.Spinner        Label_HPBW                matlab.ui.control.Label        Button_HPBW               matlab.ui.control.StateButton        Range                     matlab.ui.control.RangeSlider        EditField_Rw              matlab.ui.control.NumericEditField        IncidentWaveARRwPLFLabel  matlab.ui.control.Label        EditField_Loss            matlab.ui.control.NumericEditField        LossindBLabel             matlab.ui.control.Label        Button_Load               matlab.ui.control.Button    end        properties (Access = private)        FilePath char % InputFile Path        FolderPath char % InputFolder Path        InputFileName char        Rmax double        Rmin double        Phase double        Gmax double        Gmax_Theta double        cutE table        cutH table        cut table        Theta_Phi_0_180 table        Theta_Phi_90_27 table        Phi_Theta90 table        pax matlab.graphics.axis.PolarAxes        maxGain_RLine matlab.graphics.chart.primitive.Line        maxGain_XLine matlab.graphics.primitive.Line        maxGain_YLine matlab.graphics.primitive.Line        region_Polar matlab.graphics.chart.decoration.PolarRegion        region_Rect  matlab.graphics.chart.decoration.ConstantRegion    end        methods (Access = private)                function loadData(app, ~)           % Read the data file to detect headerLines            lines = readlines(app.FilePath);            % Initialize counter for header lines & loop index            headerLines = 0; i = 1;            % Loop through each line until it's not a header line            while i <= numel(lines) && ~isempty(regexp(lines{i}, '[a-zA-Z]', 'once'))                headerLines = headerLines + 1;                i = i + 1;            end                        % Read the data            opts = detectImportOptions(app.FilePath, 'FileType','text','NumHeaderLines',headerLines,'LeadingDelimitersRule','ignore','ConsecutiveDelimitersRule','join','Delimiter',{'\t',' '});            opts.VariableNames = {'Theta', 'Phi', 'E_TH_DB', 'E_PH_DB', 'E_TH_DG', 'E_PH_DG'};            dataIn = readtable(app.FilePath,opts);                        % Set loss/offset            loss = app.EditField_Loss.Value;            dataIn.E_TH_DB = dataIn.E_TH_DB - loss;            dataIn.E_PH_DB = dataIn.E_PH_DB - loss;            app.Table_DataIn.Data = dataIn;                        dataOut = dataIn;            dataOut.Properties.VariableNames = {'Theta', 'Phi', 'E_Total_dB', 'E_RCP_dB', 'E_LCP_dB', 'AR_dB'};                        % Compute E_total = 10*log10(10.^(RCP_mag_db/10)+10.^(LCP_mag_db/10));            dataOut.E_Total_dB = pow2db(db2pow(dataIn.E_TH_DB)+db2pow(dataIn.E_PH_DB));                        % Compute E_theta & E_phi in complex form            Eth = complex(db2mag(dataIn.E_TH_DB) .* cosd(dataIn.E_TH_DG) , db2mag(dataIn.E_TH_DB) .* sind(dataIn.E_TH_DG));            Eph = complex(db2mag(dataIn.E_PH_DB) .* cosd(dataIn.E_PH_DG) , db2mag(dataIn.E_PH_DB) .* sind(dataIn.E_PH_DG));                        % Compute E_rcp, E_lcp            Ercp = (Eth + 1i*Eph)./sqrt(2);            Elcp = (Eth - 1i*Eph)./sqrt(2);            Ercp_mag = abs(Ercp);            Elcp_mag = abs(Elcp);                        % Compute Axial Ratio            AR = (Ercp_mag + Elcp_mag)./(Ercp_mag - Elcp_mag);            AR (Ercp_mag == Elcp_mag) = sqrt(10)/1e+13;            sgn = sign(Ercp_mag - Elcp_mag);            sgn (Ercp_mag == Elcp_mag) = -1;            % Compute Polarization Loss            tau = repmat(90, size(AR)); % relative titl angle            Ra = AR;            Rw_db = app.EditField_Rw.Value;            Rw = repmat(10.^(Rw_db/20), size(AR)); % axial ratio of Wave (Incident Wave 'w')            PLF = 10*log10(0.5 +  (4*Ra.*Rw + (Ra.^2 - 1).*(Rw.^2 - 1).*cosd(2*tau))./(2*(Ra.^2 + 1).*(Rw.^2 + 1)));                    % Gain data table (Total Gain, CP components & corrected gain)            dataOut.E_RCP_dB = mag2db(Ercp_mag);        % RCP_mag_db=20log(Ercp_mag)            dataOut.E_LCP_dB = mag2db(Elcp_mag);        % LCP_mag_db=20log(Elcp_mag)            dataOut.AR_dB = mag2db(abs(AR)).*sign(AR);  % Axial Ratio=20log(mag)            dataOut.PLF = PLF;                          % Polarization Loss            dataOut.Pol_Gain = dataOut.E_Total_dB + PLF; % Generic VV AR=6dB            app.Table_DataOut.Data = dataOut;                        [maxEteha.value, maxEteha.index] = max(dataIn.E_TH_DB);            [maxEphi.value, maxEphi.index] = max(dataIn.E_PH_DB);            [maxGain.value, maxGain.index] = max(dataOut.E_Total_dB);                        % Display Max Theta-Phi Component            if gt(max(dataIn.E_TH_DB),max(dataIn.E_PH_DB))                mx=max(dataIn.E_TH_DB); component=' dB (E-TH)';            elseif lt(max(dataIn.E_TH_DB),max(dataIn.E_PH_DB))                mx=max(dataIn.E_PH_DB); component=' dB (E-PH)';            else                mx=max(dataIn.E_TH_DB); component=' dB';            end            app.Label_max.Text = ['Max E_{Theta/Phi} component:  ' num2str(mx) component];            % Display Antenna Pattern Polarization            if gt(sum(dataOut.E_RCP_dB),sum(dataOut.E_LCP_dB)), pol='RCP-Polarized'; else, pol='LCP-Polarized'; end            app.Label_Pol.Text = pol;            % Extract/Get E-Plane & H-Plane cuts            % Theta_Phi_0_180 cut            Theta_Phi0 = dataOut(dataOut.Phi ==  0, :);            Theta_Phi180 = flip(dataOut(dataOut.Phi ==  180, :));            Theta_Phi180.Theta = flip(Theta_Phi180.Theta) + 180; % = 360 - Theta_Phi180.Theta;            app.Theta_Phi_0_180 = vertcat(Theta_Phi0 , Theta_Phi180(2:end,:));            % Theta_Phi_90_270 cut            Theta_Phi90 = dataOut(dataOut.Phi ==  90, :);            Theta_Phi270 = flip(dataOut(dataOut.Phi ==  270, :));            Theta_Phi270.Theta = flip(Theta_Phi270.Theta) + 180;            app.Theta_Phi_90_27 = vertcat(Theta_Phi90 , Theta_Phi270(2:end,:));                        % Phi_Theta90 cut            app.Phi_Theta90 = dataOut(dataOut.Theta == 90, :);            app.DropDownValueChanged();        end                function plotPattern(app, ~)            app.cut = app.cutE;            app.Phase = app.cut.Theta;            cutAngle = 'Theta (degree)';            if app.Switch.Value == "H-Plane"                app.cut = app.cutH;                if contains(app.DropDown.Value, {'X', 'Y'})                    app.Phase = app.cut.Phi;                    cutAngle = 'Phi (degree)';                end            end            [app.Gmax, maxGain_idx] = max(app.cut.E_Total_dB);            app.Gmax_Theta = app.Phase(maxGain_idx);            xlabel(app.Axes2, cutAngle);            Gtot = app.cut.E_Total_dB;            Grcp = app.cut.E_RCP_dB;            Glcp = app.cut.E_LCP_dB;            app.Rmin = floor(min(min([Gtot,Grcp,Glcp]))/10)*10;            if app.Rmin < -50                app.Rmin = -50;            end                        app.Rmax = ceil(max(max([Gtot,Grcp,Glcp]))/10)*10;            app.RangeMin.Value = app.Rmin;            app.RangeMax.Value = app.Rmax;            app.Range.Limits = [app.Rmin app.Rmax];            app.Range.Value = [app.Rmin app.Rmax];            MajorTicksStep = 10;            app.Range.MajorTicks = app.Rmin:MajorTicksStep:app.Rmax;            app.Range.MajorTickLabels = app.Range.MajorTicks + " dB";            if isgraphics(app.pax.Children)                delete(app.pax.Children);            end            Plot1 = polarplot(app.pax,app.Phase*pi/180,Gtot,'LineWidth',2,'Color','red',DisplayName='E_Total');            thetaticks(app.pax,0:15:360);            app.pax.RLim = [app.Rmin app.Rmax];            app.pax.RTick = (app.Rmin:10:app.Rmax);            app.pax.ThetaZeroLocation='top';            app.pax.ThetaDir = 'clockwise';            hold(app.pax, 'on');            Plot1_2 = polarplot(app.pax,app.Phase*pi/180,Grcp,'LineWidth',2,'Color','#0072BD',DisplayName='E_RCP');            Plot1_3 = polarplot(app.pax,app.Phase*pi/180,Glcp,'LineWidth',2,'Color','#77AC30',DisplayName='E_LCP');            legend(app.pax,[Plot1,Plot1_2,Plot1_3], 'Interpreter', 'none', 'Location','northeastoutside');            uistack(Plot1,'top');            hold(app.pax, 'off');            % Rect Plot            Plot2 = plot(app.Axes2,app.Phase,Gtot, 'LineWidth', 2, 'Color', 'red',DisplayName='E_Total');            ylim(app.Axes2,[app.Rmin app.Rmax]);            yticks(app.Axes2,(app.Rmin:5:app.Rmax));            grid(app.Axes2,'on');            x=app.Gmax_Theta;            y=app.Gmax;            max_text = text(app.Axes2,x,y,['Gain_{MAX} = ' num2str(round(y,2)) 'dB'],'VerticalAlignment','bottom','FontWeight','bold');            X_line = line(app.Axes2, [x x], [app.Rmin y], 'LineStyle', '--', 'Color', 'k');            Y_line = line(app.Axes2, [app.Rmin x], [y y], 'LineStyle', '--', 'Color', 'k');            hold(app.Axes2, 'on');            Plot2_2 = plot(app.Axes2,app.Phase,Grcp, 'LineWidth', 1.5, 'Color', '#0072BD',DisplayName='E_RCP');            Plot2_3 = plot(app.Axes2,app.Phase,Glcp, 'LineWidth', 1.5, 'Color', '#77AC30',DisplayName='E_LCP');            legend(app.Axes2,[Plot2,Plot2_2,Plot2_3], 'Interpreter', 'none', 'Location','northeastoutside');            uistack(Plot2,'top');            hold(app.Axes2, 'off');        end    end        % Callbacks that handle component events    methods (Access = private)        % Code that executes after component creation        function startupFcn(app)            app.pax = polaraxes(app.Grid_Polar);            app.pax.Layout.Row = [1 4];            app.pax.Layout.Column = 3;        end        % Button pushed function: Button_Load        function Button_LoadPushed(app, event)            [FileName, app.FolderPath] = uigetfile({'*.uan;*.fz;*.txt','Antenna Pattern file'}, 'Select an Antenna Pattern File');            if isequal(FileName,0) || isequal(app.FolderPath,0)                return; % User canceled the operation            else                app.FilePath = fullfile(app.FolderPath, FileName);                [~, app.InputFileName, ~] = fileparts(app.FilePath);                app.UIFigure.Name = ['PatternReader - ' app.FilePath];                app.EditField_Loss.Value = 0;                app.loadData();            end        end        % Value changed function: EditField_Loss        function EditField_LossValueChanged(app, event)            loss  = app.EditField_Loss.Value;            if ~isempty(app.Table_DataIn.Data)                app.loadData();            end        end        % Button pushed function: Export_Input        function Export_InputButtonPushed(app, event)            if ~isempty(app.Table_DataIn.Data)                cd(app.FolderPath);                [FileName, PathName, filterindex] = uiputfile({'*.csv', 'CSV Files (*.csv)'; '*.txt', 'Text Files (*.txt)'}, 'Save Input Data',[app.FilePath, '_input']);                if isequal(FileName,0) || isequal(PathName,0)                    return; % User canceled the operation                else                    filepath = fullfile(PathName, FileName);                    if filterindex == 1                        % Export as CSV                        writetable(app.Table_DataIn.Data, filepath);                    elseif filterindex == 2                        % Export as TXT                        writetable(app.Table_DataIn.Data, filepath, 'Delimiter', '\t');                    end                end            else                msgbox('No data to export.', 'Warning', 'warn');            end        end        % Button pushed function: Export_Output        function Export_OutputButtonPushed(app, event)            if ~isempty(app.Table_DataOut.Data)                cd(app.FolderPath);                [FileName, PathName, filterindex] = uiputfile({'*.csv', 'CSV Files (*.csv)'; '*.txt', 'Text Files (*.txt)'}, 'Save Input Data',[app.InputFileName, '_output']);                if isequal(FileName,0) || isequal(PathName,0)                    return; % User canceled the operation                else                    filepath = fullfile(PathName, FileName);                    if filterindex == 1                        % Export as CSV                        writetable(app.Table_DataOut.Data, filepath);                    elseif filterindex == 2                        % Export as TXT                        writetable(app.Table_DataOut.Data, filepath, 'Delimiter', '\t');                    end                end            else                msgbox('No data to export.', 'Warning', 'warn');            end        end        % Button pushed function: Button_3dPlot        function Button_3dPlotPushed(app, event)            figure('Name','3D Plot','NumberTitle','off');            plot3D = patternCustom(app.Table_DataOut.Data.E_Total_dB,app.Table_DataOut.Data.Theta,app.Table_DataOut.Data.Phi); %3D            % fig_3D = gcf;            % fig_3d.Name = '3D Plot';        end        % Value changed function: EditField_Rw        function EditField_RwValueChanged(app, event)            if ~isempty(app.Table_DataIn.Data)                app.loadData();            end        end        % Value changed function: Range        function RangeValueChanged(app, event)            app.Rmin = min(app.Range.Value);            app.Rmax = max(app.Range.Value);            rlim(app.pax,[app.Rmin app.Rmax]);            ylim(app.Axes2,[app.Rmin app.Rmax]);        end        % Value changed function: Button_HPBW        function Button_HPBWValueChanged(app, event)            % value = app.Button_HPBW.Value;            if app.Button_HPBW.Value                app.Button_HPBW.BackgroundColor = [0 1 0];  % Green                gain = app.cut.E_Total_dB;                [maxGain, maxGain_Idx] = max(gain);                app.Gmax = maxGain;                Gain3dB = maxGain - 3;                theta_maxGain = app.Phase(maxGain_Idx);                hold(app.pax, 'on');                app.maxGain_RLine = polarplot(app.pax, [theta_maxGain theta_maxGain]*pi/180, [app.Rmin maxGain], 'k--', 'DisplayName', 'Max Gain');                app.maxGain_RLine.Annotation.LegendInformation.IconDisplayStyle = "off";                hold(app.pax, 'off');                                app.Gmax_Theta = theta_maxGain;                % binnary array                Gain_above3dB_bin = ones(size(gain));                Gain_above3dB_bin(gain < Gain3dB) = 0;                boundary_Right_Idx = find(Gain_above3dB_bin(maxGain_Idx:end) == 0,1,'first') - 2 + maxGain_Idx;                boundary_Left_Idx = find(Gain_above3dB_bin(1:maxGain_Idx) == 0,1,'last') + 1;                HP_array = Gain_above3dB_bin;                if isempty(boundary_Left_Idx)                    crossZero = true;                    boundary_Left_Idx = find(Gain_above3dB_bin == 0,1,'last') + 1;                    HP_array (boundary_Right_Idx:boundary_Left_Idx) = 0;                else                    crossZero = false;                    HP_array (1:boundary_Left_Idx-1) = 0;                    HP_array (boundary_Right_Idx+1:end) = 0;                end                                Theta = app.Phase;                step = unique(diff(Theta));                                HPBW_array = nonzeros(HP_array);                HPBW = numel(HPBW_array)*step;                                theta_bounds = Theta([boundary_Right_Idx,boundary_Left_Idx]);                                if crossZero                    theta_bounds = wrapTo180(theta_bounds);                end                                % HPBW_region                app.region_Polar = thetaregion(app.pax, theta_bounds*pi/180, FaceColor='y', FaceAlpha=0.3, DisplayName='HPBW');                app.region_Polar.Annotation.LegendInformation.IconDisplayStyle = "off";                app.region_Rect = xregion(app.Axes2 , theta_bounds, FaceColor='y', DisplayName='HPBW');				app.region_Rect.Annotation.LegendInformation.IconDisplayStyle = "off";                app.maxGain_XLine = line(app.Axes2, [theta_maxGain theta_maxGain], [app.Rmin maxGain], LineStyle='--', Color='k');                app.maxGain_YLine = line(app.Axes2, [app.Rmin theta_maxGain], [maxGain maxGain], LineStyle='--', Color='k');                app.maxGain_XLine.Annotation.LegendInformation.IconDisplayStyle = "off";                app.maxGain_YLine.Annotation.LegendInformation.IconDisplayStyle = "off";								app.Label_HPBW.Text = {['HPBW:' num2str(HPBW) '°']; ['Max Gain @' num2str(theta_maxGain) '°']; ['Max Gain:' num2str(round(maxGain,2)) 'dBi']};            else                app.Button_HPBW.BackgroundColor = [0.96,0.96,0.96];                delete([app.region_Polar, app.region_Rect, app.maxGain_RLine, app.maxGain_XLine, app.maxGain_XLine]);                app.Label_HPBW.Text = '';                app.Button_HPBW.Value = 0;            end        end        % Value changed function: Switch        function SwitchValueChanged(app, event)            switch app.Switch.Value %event.Value                case 'E-Plane'                    app.cut = app.cutE;                otherwise % case app.DropDown.Value == 'H-Plane'                    app.cut = app.cutH;            end            app.plotPattern();                        if app.Button_HPBW.Value                % Button_HPBWValueChanged(app, event);                app.Button_HPBWValueChanged();            end        end        % Value changed function: DropDown        function DropDownValueChanged(app, event)            % value = app.DropDown.Value;            switch app.DropDown.Value %event.Value                case {'+X','-X'}                    app.cutE = app.Theta_Phi_0_180;                    app.cutH = app.Phi_Theta90;                    if app.DropDown.Value == "+X"                        % xlim(app.Axes2,[0 180]);                        app.Axes2.XLim = [0 180];                    else                        xlim(app.Axes2,[180 360]);                    end                case {'+Y','-Y'}                    app.cutE = app.Theta_Phi_90_27;                    app.cutH = app.Phi_Theta90;                    if app.DropDown.Value == "+Y"                        xlim(app.Axes2,[0 180]);                    else                        xlim(app.Axes2,[180 360]);                    end                otherwise % case app.DropDown.Value == 'Z-axis'                    app.cutE = app.Theta_Phi_0_180;                    app.cutH = app.Theta_Phi_90_27;                    xlim(app.Axes2,[0 180]);            end                        app.Axes2.XTick = min(app.Axes2.XLim):15:max(app.Axes2.XLim);            app.SwitchValueChanged();        end        % Button pushed function: Button_ContourPlot        function Button_ContourPlotPushed(app, event)            phi_unique = unique(app.Table_DataOut.Data.Phi);            theta_unique = unique(app.Table_DataOut.Data.Theta);            [phi_mat, theta_mat] = meshgrid(phi_unique, theta_unique);            Gain_mat = reshape(app.Table_DataOut.Data.E_Total_dB, length(phi_unique), length(theta_unique));            figure('Name','Contour Plot','NumberTitle','off');            plotContour = contourf(phi_mat, theta_mat, Gain_mat', 'LineStyle', 'none');            clim([app.Rmin app.Rmax]); %caxis            colorbar;            colormap(jet);            ax = gca ;            ax.XLabel.String = 'Phi (degrees)';            ax.YLabel.String = 'Theta (degrees)';            ax.YDir = 'reverse';                    end        % Value changed function: RangeMin        function RangeMinValueChanged(app, event)            app.Rmin = app.RangeMin.Value;            app.Range.Limits = [app.Rmin app.Rmax];            app.Range.Value = [app.Rmin app.Rmax];            MajorTicksStep = 10;            app.Range.MajorTicks = app.Rmin:MajorTicksStep:app.Rmax;            app.Range.MajorTickLabels = app.Range.MajorTicks + " dB";            app.RangeValueChanged();            app.pax.RTick = (app.Rmin:10:app.Rmax);            yticks(app.Axes2,(app.Rmin:5:app.Rmax));        end        % Value changed function: RangeMax        function RangeMaxValueChanged(app, event)            app.Rmax = app.RangeMax.Value;            app.Range.Limits = [app.Rmin app.Rmax];            app.Range.Value = [app.Rmin app.Rmax];            MajorTicksStep = 10;            app.Range.MajorTicks = app.Rmin:MajorTicksStep:app.Rmax;            app.Range.MajorTickLabels = app.Range.MajorTicks + " dB";            app.RangeValueChanged();            app.pax.RTick = (app.Rmin:10:app.Rmax);            yticks(app.Axes2,(app.Rmin:5:app.Rmax));        end    end    % Component initialization    methods (Access = private)        % Create UIFigure and components        function createComponents(app)            % Create UIFigure & hide until all components are created            app.UIFigure = uifigure('Visible', 'off', Name = 'PatternReader');            app.UIFigure.Position = [100 100 1150 750];            % Create Grid            app.Grid = uigridlayout(app.UIFigure);            app.Grid.ColumnWidth = {'1x', '1x', '1x', '1x', '1x', '1x', '1x', '1x'};            app.Grid.RowHeight = {'fit', 'fit', 'fit', '1x', '1x', 'fit', '1x', '1x', 'fit'};            % Create Button_Load            app.Button_Load = uibutton(app.Grid, 'push', Text = 'Load Pattern');            app.Button_Load.ButtonPushedFcn = createCallbackFcn(app, @Button_LoadPushed, true);            app.Button_Load.Layout.Row = 2;            app.Button_Load.Layout.Column = [2 7];            % Create LossindBLabel            app.LossindBLabel = uilabel(app.Grid, Text = 'Loss[dB]');            app.LossindBLabel.Layout.Row = 3;            app.LossindBLabel.Layout.Column = 3;            % Create EditField_Loss            app.EditField_Loss = uieditfield(app.Grid, 'numeric', Limits = [0 Inf]);            app.EditField_Loss.ValueChangedFcn = createCallbackFcn(app, @EditField_LossValueChanged, true);            app.EditField_Loss.Layout.Row = 3;            app.EditField_Loss.Layout.Column = 4;            % Create IncidentWaveARRwPLFLabel            app.IncidentWaveARRwPLFLabel = uilabel(app.Grid);            app.IncidentWaveARRwPLFLabel.Layout.Row = 3;            app.IncidentWaveARRwPLFLabel.Layout.Column = [5 6];            app.IncidentWaveARRwPLFLabel.Text = 'Rw[dB]';            % Create EditField_Rw            app.EditField_Rw = uieditfield(app.Grid, 'numeric', Value = 6);            app.EditField_Rw.ValueChangedFcn = createCallbackFcn(app, @EditField_RwValueChanged, true);            app.EditField_Rw.Layout.Row = 3;            app.EditField_Rw.Layout.Column = 7;            % Create Panel_Polar            app.Panel_Polar = uipanel(app.Grid);            app.Panel_Polar.Layout.Row = [4 5];            app.Panel_Polar.Layout.Column = [1 4];            % Create Grid_Polar            app.Grid_Polar = uigridlayout(app.Panel_Polar);            app.Grid_Polar.ColumnWidth = {'fit', '0.25x', '1x', '0.2x'};            app.Grid_Polar.RowHeight = {'fit', 'fit', '1x', 'fit'};            % Create Range            app.Range = uislider(app.Grid_Polar, 'range', Orientation = 'vertical');            app.Range.ValueChangedFcn = createCallbackFcn(app, @RangeValueChanged, true);            app.Range.Layout.Row = [2 3];            app.Range.Layout.Column = 1;            % Create Button_HPBW            app.Button_HPBW = uibutton(app.Grid_Polar, 'state', Text = 'HPBW');            app.Button_HPBW.ValueChangedFcn = createCallbackFcn(app, @Button_HPBWValueChanged, true);            app.Button_HPBW.Layout.Row = 1;            app.Button_HPBW.Layout.Column = 4;            % Create Label_HPBW            app.Label_HPBW = uilabel(app.Grid_Polar, Text = '');            app.Label_HPBW.Layout.Row = 2;            app.Label_HPBW.Layout.Column = 4;            % Create RangeMin            app.RangeMin = uispinner(app.Grid_Polar);            app.RangeMin.ValueChangedFcn = createCallbackFcn(app, @RangeMinValueChanged, true);            app.RangeMin.Layout.Row = 4;            app.RangeMin.Layout.Column = 1;            % Create RangeMax            app.RangeMax = uispinner(app.Grid_Polar);            app.RangeMax.ValueChangedFcn = createCallbackFcn(app, @RangeMaxValueChanged, true);            app.RangeMax.Layout.Row = 1;            app.RangeMax.Layout.Column = 1;            % Create Panel_Rect            app.Panel_Rect = uipanel(app.Grid);            app.Panel_Rect.Layout.Row = [4 5];            app.Panel_Rect.Layout.Column = [5 8];            % Create Grid_Rect            app.Grid_Rect = uigridlayout(app.Panel_Rect);            % Create Axes2            app.Axes2 = uiaxes(app.Grid_Rect, XLim = [0 180]);            app.Axes2.Layout.Row = [1 2];            app.Axes2.Layout.Column = [1 2];			xlabel(app.Axes2, 'Theta')            ylabel(app.Axes2, 'dB')            % Create Label_max            app.Label_max = uilabel(app.Grid);            app.Label_max.Layout.Row = 6;            app.Label_max.Layout.Column = [1 2];            % Create Button_3dPlot            app.Button_3dPlot = uibutton(app.Grid, 'push', Text = 'Plot3D');            app.Button_3dPlot.ButtonPushedFcn = createCallbackFcn(app, @Button_3dPlotPushed, true);            app.Button_3dPlot.Layout.Row = 6;            app.Button_3dPlot.Layout.Column = [4 5];            % Create Button_ContourPlot            app.Button_ContourPlot = uibutton(app.Grid, 'push', Text = 'Contour');            app.Button_ContourPlot.ButtonPushedFcn = createCallbackFcn(app, @Button_ContourPlotPushed, true);            app.Button_ContourPlot.Layout.Row = 6;            app.Button_ContourPlot.Layout.Column = 3;            % Create Label_Pol            app.Label_Pol = uilabel(app.Grid);            app.Label_Pol.Layout.Row = 6;            app.Label_Pol.Layout.Column = [7 8];            % Create Table_DataIn            app.Table_DataIn = uitable(app.Grid, ColumnName = {'Theta'; 'Phi'; 'E-TH-DB'; 'E-PH-DB'; 'E-TH-DG'; 'E-PH-DG'});            app.Table_DataIn.Layout.Row = [7 8];            app.Table_DataIn.Layout.Column = [1 4];            % Create Table_DataOut            app.Table_DataOut = uitable(app.Grid, ColumnName = {'Theta'; 'Phi'; 'ETotdB'; 'ERCPdB'; 'ELCPdB'; 'ARdB'; 'PLF_dB'; 'E_Polarized'});            app.Table_DataOut.Layout.Row = [7 8];            app.Table_DataOut.Layout.Column = [5 8];            % Create Export_Input            app.Export_Input = uibutton(app.Grid, 'push', Text = 'Export Input Pattern');            app.Export_Input.ButtonPushedFcn = createCallbackFcn(app, @Export_InputButtonPushed, true);            app.Export_Input.Layout.Row = 9;            app.Export_Input.Layout.Column = [2 3];            % Create Export_Output            app.Export_Output = uibutton(app.Grid, 'push', Text = 'Export Gain Pattern');            app.Export_Output.ButtonPushedFcn = createCallbackFcn(app, @Export_OutputButtonPushed, true);            app.Export_Output.Layout.Row = 9;            app.Export_Output.Layout.Column = [6 7];            % Create Switch            app.Switch = uiswitch(app.Grid, 'slider', Items = {'E-Plane', 'H-Plane'});            app.Switch.ValueChangedFcn = createCallbackFcn(app, @SwitchValueChanged, true);            app.Switch.Layout.Row = 3;            app.Switch.Layout.Column = 1;            % Create DropDown            app.DropDown = uidropdown(app.Grid, Items = {'Orientation:', '+Z', '-Z', '+X', '-X', '+Y', '-Y'});            app.DropDown.ValueChangedFcn = createCallbackFcn(app, @DropDownValueChanged, true);            app.DropDown.Layout.Row = 3;            app.DropDown.Layout.Column = 2;            % Show the figure after all components are created            app.UIFigure.Visible = 'on';        end    end    % App creation and deletion    methods (Access = public)        % Construct app        function app = PatternReader            % Create UIFigure and components            createComponents(app)            % Register the app with App Designer            registerApp(app, app.UIFigure)            % Execute the startup function            runStartupFcn(app, @startupFcn)            if nargout == 0                clear app            end        end        % Code that executes before app deletion        function delete(app)            % Delete UIFigure when app is deleted            delete(app.UIFigure)        end    endend